<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css">
    <script src="jquery-3.7.1.min.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

    <script>
        $(document).ready(function () {
            var tab = "";

            var myurl = window.location.href;
            var url = new URL(myurl);
            var pics = url.searchParams.get("pics").split(",");
            var pnames = url.searchParams.get("pnames").split(",");
            var price = url.searchParams.get("price").split(",");
            var dprice = url.searchParams.get("dprice").split(",");
            var tt=0;
            for(var i=0;i<pics.length;i++)
        {
            tt=tt+parseInt(dprice[i]);
            tab=tab+"<tr><td>"+(i+1)+"</td><td>"+pnames[i]+"</td><td><img src='"+pics[i]+"' height='100px' width='100px'></td><td>"+price[i]+"</td><td>"+dprice[i]+"</td><td><input type='number' class='form-control' id='t"+(i+1)+"' value='1'> </td><td><input type='number' class='form-control' id='t"+(i+1)+"' value='"+dprice[i]+"' readonly='true'></td><td><span class='fa fa-trash delete' style='font-size:45px; color:red; cursor:pointer;'></span></td>";
                
                
        }

         tab=tab+"<tr><th colspan='6'>Grand Total</th><th id='tt1'>"+tt+"</th></tr><tr><td><button class='btn btn-info' onclick='window.print()'>Proceed to Pay</button></td></tr>"
       $("#tbody").html(tab);
        
        // $("#tbody").html(tab);
        })
    </script>

    <script>
        $(document).ready(function(){
            $("tr td .delete").on("click",function(){
                var tx=$(this).closest('tr').remove();

                var x=$(this).closest('tr').find("td").eq(6).find("input").val();
                var s=(parseInt($("#tt1").text())-parseInt(x));
                $("#tt1").text(s);
            });

            //work on quantity of products
            $("tr td input").on("blur",function(){
                var p=parseInt($(this).val());
                var n=parseInt($(this).closest("tr").find("td").eq(4).text());
                ($(this).closest("tr").find("td").eq(6).find("input").val(p*n));
                
                var tp=0;
                $("tbody tr").each(function(i,el){
                    var t=$(this).find("td").eq(6).find("input").val();
                    if(t!=undefined)
                {
                    tp=tp+parseInt(t);
                }
                });
                $("#tt1").text(tp);
            });
            
        })
    </script>
</head>

<body>

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12" style="min-height: 100px; background: gray;">
                <p style="color: white; font-size: 40px; padding: 2%;"> Your Products List</p>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <table class="table">
                    <thead class="table-dark">
                        <tr>
                            <th>Sr.No</th>
                            <th>Product Name</th>
                            <th>Product Picture</th>
                            <th>price</th>
                            <th>Discounted Price</th>
                            <th>Total Quantity</th>
                            <th>Total</th>
                            <th>Remove Product</th>


                        </tr>
                    </thead>
                    <tbody id="tbody"></tbody>
                </table>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12" style="min-height: 50px; background: grey; text-align: center; font-size: 35px;">
                Copyright &copy; Mecatredz Software
                Software and Innovations Pvt.Ltd
            </div>
        </div>
    </div>
</body>

</html>
